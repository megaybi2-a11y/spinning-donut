<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>ASCII Donut</title>
<style>
  body {
    margin: 0;
    background: black;
    color: #00ff99;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: monospace;
  }
  pre {
    font-size: 14px;
    line-height: 1;
  }
</style>
</head>
<body>

<pre id="donut"></pre>

<script>
const pre = document.getElementById("donut");

let A = 0, B = 0;

function render() {
  const b = [];
  const z = [];

  A += 0.04;
  B += 0.02;

  const cA = Math.cos(A), sA = Math.sin(A);
  const cB = Math.cos(B), sB = Math.sin(B);

  for (let i = 0; i < 1760; i++) {
    b[i] = " ";
    z[i] = 0;
  }

  for (let j = 0; j < 6.28; j += 0.07) {
    const ct = Math.cos(j), st = Math.sin(j);
    for (let i = 0; i < 6.28; i += 0.02) {
      const sp = Math.sin(i), cp = Math.cos(i);
      const h = ct + 2;
      const D = 1 / (sp * h * sA + st * cA + 5);
      const t = sp * h * cA - st * sA;

      const x = Math.floor(40 + 30 * D * (cp * h * cB - t * sB));
      const y = Math.floor(12 + 15 * D * (cp * h * sB + t * cB));
      const o = x + 80 * y;
      const N = Math.floor(
        8 * (
          (st * sA - sp * ct * cA) * cB -
          sp * ct * sA -
          st * cA -
          cp * ct * sB
        )
      );

      if (y < 22 && y >= 0 && x >= 0 && x < 80 && D > z[o]) {
        z[o] = D;
        b[o] = ".,-~:;=!*#$@"[Math.max(N, 0)];
      }
    }
  }

  pre.textContent = b.join("");
}

setInterval(render, 50);
</script>

</body>
</html>
